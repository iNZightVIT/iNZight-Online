{
    "contents" : "#library(NCBI2R)\n\nsource(\"/home/christoph/Dropbox/master/workspace/GWPS_R_scripts/getSet.R\")\n\n## Load generated cohorts (see createCohorts.R)\n## only once executed for cohort 1 and 2 because it was merged and they are loaded below\n# cohort1 = load.cohort(\"/media/christoph/0357FCFC5DF93E00/scores/1958UC\")# 1st control cohort\n# cohort2 = load.cohort(\"/media/christoph/0357FCFC5DF93E00/scores/NBS\")# 2nd control cohort\n# cohort3 = load.cohort(\"/media/christoph/0357FCFC5DF93E00/scores/Cases\")# Cases cohort\n# \n# # Merge the two control cohorts into one cohort.\n# # only once executed \n# cohort.merged = merge.cohorts(cohort1,cohort2,\n#                               \"/media/christoph/0357FCFC5DF93E00/scores/merged_controls\")\n# \n# # Load the merged control cohorts\n# cohort.merged = load.cohort(\"/media/christoph/0357FCFC5DF93E00/scores/merged_controls\")\n# \n# # Create the GWPS object\n# # only once executed\n# \n# gwps = GWPS(cohort.merged,cohort3,\"/media/christoph/0357FCFC5DF93E00/scores/GWPS\",name=\"UC study\",\n#             description=\"GWAS for ulcerative colitis as described in Barrett et al(2009)\")\n\ngwps = load.GWPS(\"/media/christoph/0357FCFC5DF93E00/scores/GWPS\")\n\n## only once to be executed reload with code below\n## create a pathways object. First from the msigdb database.\n## 1st: convert input file to right format \n\n# pathway.list = read.pathways.gmt(file=\"/media/christoph/0357FCFC5DF93E00/msigdb/msigdb.v4.0.symbols.gmt\")\n# description.list = pathway.list$descriptions\n# pathway.list = pathway.list$pathways\n# p.ways = pathways()\n# while loop in case conection to biomaRt fails and an error is thrown.\n# while(length(p.ways@names.pathways)<length(pathway.list)){\n#   p.ways = add.pathway.list(p.ways,\n#                             out.dir=\"/media/christoph/0357FCFC5DF93E00/scores/pathways/pathways\",\n#                             pathway.list=pathway.list,\n#                             id.type = \"symbol\",\n#                             description.list=description.list,\n#                             database.list=\"msigdb\", \n#                             save.object=\"/media/christoph/0357FCFC5DF93E00/scores/pathways\")\n# }\n\n# Add homo sapiens wiki pathways to the pathways object\n# 1st: convert input file to right format \n\n# pathway.list = read.table(file=\"/media/christoph/0357FCFC5DF93E00/wiki_pathways_homo_sapiens/wikipathways_data_Homo sapiens.tab\",\n#                    header=T,\n#                    sep=\"\\t\",\n#                    stringsAsFactors=F)\n# description.list = pathway.list$Url.to.WikiPathways\n# names = pathway.list$Pathway.Name\n# names = gsub(\"/\",\"-\",names,fixed=T) # remove \"/\" (swapped with \"-\") from names or file path will be wrong\n# pathway.list = strsplit(pathway.list$Entrez.Gene,\",\",fixed=T)\n# names(pathway.list) = names\n# p.ways = add.pathway.list(p.ways,\n#                             out.dir=\"/media/christoph/0357FCFC5DF93E00/scores/pathways/pathways\",\n#                             pathway.list=pathway.list,\n#                             id.type = \"entrez\",\n#                             description.list=description.list,\n#                             database.list=\"wiki.pathways\", \n#                             save.object=\"/media/christoph/0357FCFC5DF93E00/scores/pathways\")\n\n## pathways from different databases retrieved from pathways common database\n# pathway.list = read.pathways.gmt(file=\"/media/christoph/0357FCFC5DF93E00/pathway-commons/homo-sapiens-9606-entrez-gene-id.gmt\")\n# description.list = pathway.list$descriptions\n# pathway.list = pathway.list$pathways\n# names(pathway.list) = gsub(\"/\",\"-\",names(pathway.list),fixed=T) # remove \"/\" (swapped with \"-\") from names or file path will be wrong\n# \n# p.ways = add.pathway.list(p.ways,\n#                           out.dir=\"/media/christoph/0357FCFC5DF93E00/scores/pathways/pathways\",\n#                           pathway.list=pathway.list,\n#                           id.type = \"entrez\",\n#                           database.list=description.list, \n#                           save.object=\"/media/christoph/0357FCFC5DF93E00/scores/pathways\")\n\np.ways = load.pathways(\"/media/christoph/0357FCFC5DF93E00/scores/pathways\")\n\ngwps.statistics(gwps,p.ways,save.plots=\"/media/christoph/0357FCFC5DF93E00/scores/results2\")\n\n#geneset enrichment analysis\n\n#GWPS analysis\n\nsorted.geneset.results = gwps.analysis(gwps,p.ways,out.dir,log.regr.pval.cutoff=0.05)\n\n",
    "created" : 1412115892747.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "595229169",
    "id" : "476C3A6E",
    "lastKnownWriteTime" : 1411070188,
    "path" : "~/Dropbox/master/workspace/GWPS_R_scripts/gwps_analysis.R",
    "project_path" : null,
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}